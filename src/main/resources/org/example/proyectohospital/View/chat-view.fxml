<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox prefHeight="572.0" prefWidth="666.0" spacing="10" style="-fx-padding: 15; -fx-pref-width: 700; -fx-pref-height: 550;" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.proyectohospital.Controller.ChatController">

    <!-- Cabecera -->
    <HBox alignment="CENTER" spacing="10">
      <ImageView fitHeight="35.0" fitWidth="34.0" pickOnBounds="true" preserveRatio="true">
         <image>
            <Image url="@../Resources/Assets/Images/chatLogo.png" />
         </image>
      </ImageView>
        <Label style="-fx-font-size: 16; -fx-font-weight: bold;" text="Bienvenido al chat del Hospital" />
        <Label fx:id="lblEstado" style="-fx-text-fill: red;" text="Desconectado">
         <font>
            <Font size="15.0" />
         </font></Label>
    </HBox>

    <SplitPane dividerPositions="0.7">
        <!-- Área principal de mensajes -->
        <VBox prefHeight="445.0" prefWidth="465.0" spacing="10">
            <Label alignment="CENTER" prefHeight="25.0" prefWidth="501.0" style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: #2c3e50;" text="Mensajes:" />
            <TextArea fx:id="txtAreaMensajes" editable="false" prefHeight="350" style="-fx-font-family: 'Arial'; -fx-font-size: 12;" />

            <HBox alignment="CENTER_LEFT" spacing="10">
                <TextField fx:id="txtMensaje" onAction="#enviarMensaje" prefHeight="25.0" prefWidth="374.0" promptText="Escribe tu mensaje..." HBox.hgrow="ALWAYS" />
                <Button defaultButton="true" onAction="#enviarMensaje" style="-fx-background-color: #FF8C00; -fx-text-fill: white; -fx-font-weight: bold;" text="Enviar" />
            </HBox>
        </VBox>

        <!-- Panel lateral de usuarios -->
        <VBox prefHeight="448.0" prefWidth="167.0" spacing="10" style="-fx-padding: 0 0 0 10;">
            <Label alignment="CENTER" prefHeight="20.0" prefWidth="250.0" style="-fx-font-weight: bold; -fx-text-fill: #2c3e50; -fx-font-size: 14px;" text="Usuarios Conectados:" />
            <ListView fx:id="listUsuarios" prefHeight="328.0" prefWidth="216.0" />

            <VBox alignment="CENTER" prefHeight="92.0" prefWidth="187.0" spacing="5">
                <Button onAction="#actualizarUsuarios" style="-fx-pref-width: 150; -fx-background-color: #FF4500; -fx-text-fill: white; -fx-font-weight: bold;" text="Actualizar Lista" />
                <Button onAction="#enviarMensajePrivado" style="-fx-pref-width: 150; -fx-background-color: #FF4500; -fx-text-fill: white; -fx-font-weight: bold;" text="Enviar Mensaje Privado" />
            </VBox>
        </VBox>
    </SplitPane>

    <!-- Panel de conexión -->
    <HBox alignment="CENTER_RIGHT" prefHeight="33.0" prefWidth="670.0" spacing="10">
        <Button fx:id="btnConectar" onAction="#conectarChat" style="-fx-font-weight: bold; -fx-background-color: #228B22; -fx-text-fill: white;" text="Conectar al Chat" />
        <Button fx:id="btnDesconectar" disable="true" onAction="#desconectarChat" style="-fx-background-color: #DC143C; -fx-text-fill: white; -fx-font-weight: bold;" text="Desconectar" />
    </HBox>
</VBox>
